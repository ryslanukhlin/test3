{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/\\u0420\\u0443\\u0441\\u043B\\u0430\\u043D/Desktop/NestAndNextShopPizza/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/\\u0420\\u0443\\u0441\\u043B\\u0430\\u043D/Desktop/NestAndNextShopPizza/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Button, Container, Typography } from '@material-ui/core';\nimport { useRouter } from 'next/dist/client/router';\nimport React from 'react';\nimport { useAction } from '../hooks/useAction';\nimport { useTypedSelector } from '../hooks/useTypeSelector';\nimport style from \"../style/user.module.scss\";\nimport getConfig from 'next/config';\n\nvar _getConfig = getConfig(),\n    publicRuntimeConfig = _getConfig.publicRuntimeConfig;\n\nvar user = function user() {\n  var router = useRouter();\n\n  var _useTypedSelector = useTypedSelector(function (state) {\n    return state.userReducer;\n  }),\n      isAuth = _useTypedSelector.isAuth,\n      user = _useTypedSelector.user;\n\n  var _useAction = useAction(),\n      Logout = _useAction.Logout,\n      setUserLocal = _useAction.setUserLocal;\n\n  React.useEffect(function () {\n    if (!isAuth) {\n      router.back();\n    }\n  }, [isAuth]);\n\n  if (!isAuth) {\n    return /*#__PURE__*/_jsx(\"h1\", {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    });\n  }\n\n  var logout = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return router.push('/');\n\n            case 2:\n              Logout();\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function logout() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var iconDownload = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var formData, response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              formData = new FormData();\n              formData.append(\"icon\", e.target.files[0]);\n              formData.append(\"id\", user._id);\n              _context2.next = 5;\n              return fetch(publicRuntimeConfig.backendUri + \"/users/icon\", {\n                method: \"POST\",\n                body: formData\n              });\n\n            case 5:\n              response = _context2.sent;\n              _context2.t0 = setUserLocal;\n              _context2.next = 9;\n              return response.json();\n\n            case 9:\n              _context2.t1 = _context2.sent;\n              (0, _context2.t0)(_context2.t1);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function iconDownload(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(Container, {\n    maxWidth: \"lg\",\n    className: style.wrapper,\n    children: [/*#__PURE__*/_jsx(\"img\", {\n      className: style.bgUser,\n      src: \"/bgUserPage.jpg\",\n      alt: \"\\u0437\\u0430\\u0434\\u043D\\u0438\\u0439 \\u0444\\u043E\\u043D\"\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: style.infoWrapper,\n      children: [/*#__PURE__*/_jsx(\"img\", {\n        className: style.photoUser,\n        src: user !== null && user !== void 0 && user.icon ? user.icon : \"/dontIconUser.png\",\n        alt: \"\\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"downloadPhoto\",\n        style: {\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          onChange: iconDownload,\n          style: {\n            display: \"none\"\n          },\n          accept: \"image/*\",\n          id: \"contained-button-file\",\n          multiple: true,\n          type: \"file\"\n        }), /*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"contained-button-file\",\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outlined\",\n            size: \"small\",\n            component: \"span\",\n            children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u044E\"\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(Typography, {\n        variant: \"h5\",\n        children: [\"\\u041D\\u0438\\u043A: \", user === null || user === void 0 ? void 0 : user.nicname]\n      }), /*#__PURE__*/_jsxs(Typography, {\n        variant: \"h6\",\n        children: [\"\\u041F\\u043E\\u0447\\u0442\\u0430: \", user === null || user === void 0 ? void 0 : user.email]\n      }), /*#__PURE__*/_jsx(Button, {\n        className: style.logout,\n        variant: \"outlined\",\n        onClick: logout,\n        children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n      })]\n    })]\n  });\n};\n\nexport default user;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/\\u0420\\u0443\\u0441\\u043B\\u0430\\u043D/Desktop/NestAndNextShopPizza/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/\\u0420\\u0443\\u0441\\u043B\\u0430\\u043D/Desktop/NestAndNextShopPizza/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Users/\\u0420\\u0443\\u0441\\u043B\\u0430\\u043D/Desktop/NestAndNextShopPizza/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"C:/Users/\\u0420\\u0443\\u0441\\u043B\\u0430\\u043D/Desktop/NestAndNextShopPizza/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Button, Grid, TextField, Typography } from '@material-ui/core';\nimport React from 'react';\nimport style from '../../style/auth.module.scss';\nimport getConfig from 'next/config';\nimport { useSnackbar } from 'notistack';\n\nvar _getConfig = getConfig(),\n    publicRuntimeConfig = _getConfig.publicRuntimeConfig;\n\nvar RegisterPage = function RegisterPage(_ref) {\n  var goLogin = _ref.goLogin;\n\n  var _useSnackbar = useSnackbar(),\n      enqueueSnackbar = _useSnackbar.enqueueSnackbar;\n\n  var _React$useState = React.useState({\n    nicname: \"\",\n    email: \"\",\n    password: \"\",\n    repeatPassword: \"\"\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      registerForm = _React$useState2[0],\n      setRegisterForm = _React$useState2[1];\n\n  var changeForm = function changeForm(e) {\n    setRegisterForm(_objectSpread(_objectSpread({}, registerForm), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var register = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var response, clearForm, orderItem, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(registerForm.password !== registerForm.repeatPassword)) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", enqueueSnackbar('passwords don\\'t match', {\n                variant: \"error\"\n              }));\n\n            case 2:\n              _context.next = 4;\n              return fetch(publicRuntimeConfig.backendUri + \"/users\", {\n                method: \"POST\",\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify(_objectSpread({}, registerForm))\n              });\n\n            case 4:\n              response = _context.sent;\n\n              if (response.status === 201) {\n                enqueueSnackbar('registration was successful', {\n                  variant: \"success\"\n                });\n                clearForm = registerForm;\n\n                for (orderItem in registerForm) {\n                  clearForm[orderItem] = \"\";\n                }\n\n                setRegisterForm(_objectSpread({}, clearForm));\n              }\n\n              _context.next = 8;\n              return response.json();\n\n            case 8:\n              data = _context.sent;\n\n              if (response.status === 400) {\n                data.message.map(function (err) {\n                  enqueueSnackbar(err, {\n                    variant: \"error\"\n                  });\n                });\n              }\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function register() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(Typography, {\n      variant: \"h6\",\n      children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F \\u043D\\u0430 FamulyPizza\"\n    }), /*#__PURE__*/_jsx(TextField, {\n      value: registerForm.nicname,\n      onChange: changeForm,\n      size: \"small\",\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      label: \"\\u041D\\u0438\\u043A\\u043D\\u0435\\u0439\\u043C\",\n      name: \"nicname\"\n    }), /*#__PURE__*/_jsx(TextField, {\n      value: registerForm.email,\n      onChange: changeForm,\n      size: \"small\",\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      label: \"\\u041F\\u043E\\u0447\\u0442\\u0430\",\n      name: \"email\"\n    }), /*#__PURE__*/_jsx(TextField, {\n      value: registerForm.password,\n      onChange: changeForm,\n      size: \"small\",\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      name: \"password\",\n      label: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n      type: \"password\"\n    }), /*#__PURE__*/_jsx(TextField, {\n      value: registerForm.repeatPassword,\n      onChange: changeForm,\n      size: \"small\",\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      name: \"repeatPassword\",\n      label: \"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n      type: \"password\"\n    }), /*#__PURE__*/_jsx(Button, {\n      onClick: register,\n      type: \"submit\",\n      fullWidth: true,\n      variant: \"contained\",\n      color: \"primary\",\n      children: \"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0435\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"\n    }), /*#__PURE__*/_jsxs(Grid, {\n      container: true,\n      className: style.modalFooter,\n      children: [/*#__PURE__*/_jsx(Grid, {\n        item: true,\n        xs: true\n      }), /*#__PURE__*/_jsx(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsx(Typography, {\n          className: style.customLink,\n          variant: \"inherit\",\n          onClick: goLogin,\n          children: \"\\u0412\\u044B \\u0438\\u043C\\u0435\\u0435\\u0442\\u0435 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442? \\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435\"\n        })\n      })]\n    })]\n  });\n};\n\nexport default RegisterPage;","map":null,"metadata":{},"sourceType":"module"}
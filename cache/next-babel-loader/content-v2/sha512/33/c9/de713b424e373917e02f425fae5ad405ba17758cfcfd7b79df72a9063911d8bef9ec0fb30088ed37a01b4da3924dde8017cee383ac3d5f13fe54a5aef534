{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Button, Container, Typography } from '@material-ui/core';\nimport { useRouter } from 'next/dist/client/router';\nimport React from 'react';\nimport { useAction } from '../hooks/useAction';\nimport { useTypedSelector } from '../hooks/useTypeSelector';\nimport style from \"../style/user.module.scss\";\nimport getConfig from 'next/config';\nconst {\n  publicRuntimeConfig\n} = getConfig();\n\nconst user = () => {\n  const router = useRouter();\n  const {\n    isAuth,\n    user\n  } = useTypedSelector(state => state.userReducer);\n  const {\n    Logout,\n    setUserLocal\n  } = useAction();\n  React.useEffect(() => {\n    if (!isAuth) {\n      router.back();\n    }\n  }, [isAuth]);\n\n  if (!isAuth) {\n    return /*#__PURE__*/_jsx(\"h1\", {\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    });\n  }\n\n  const logout = async () => {\n    await router.push('/');\n    Logout();\n  };\n\n  const iconDownload = async e => {\n    const formData = new FormData();\n    formData.append(\"icon\", e.target.files[0]);\n    formData.append(\"id\", user._id);\n    const response = await fetch(publicRuntimeConfig.backendUri + \"/users/icon\", {\n      method: \"POST\",\n      body: formData\n    });\n    setUserLocal(await response.json());\n  };\n\n  return /*#__PURE__*/_jsxs(Container, {\n    maxWidth: \"lg\",\n    className: style.wrapper,\n    children: [/*#__PURE__*/_jsx(\"img\", {\n      className: style.bgUser,\n      src: \"/bgUserPage.jpg\",\n      alt: \"\\u0437\\u0430\\u0434\\u043D\\u0438\\u0439 \\u0444\\u043E\\u043D\"\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: style.infoWrapper,\n      children: [/*#__PURE__*/_jsx(\"img\", {\n        className: style.photoUser,\n        src: user !== null && user !== void 0 && user.icon ? user.icon : \"/dontIconUser.png\",\n        alt: \"\\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u044F \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"downloadPhoto\",\n        style: {\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsx(\"input\", {\n          onChange: iconDownload,\n          style: {\n            display: \"none\"\n          },\n          accept: \"image/*\",\n          id: \"contained-button-file\",\n          multiple: true,\n          type: \"file\"\n        }), /*#__PURE__*/_jsx(\"label\", {\n          htmlFor: \"contained-button-file\",\n          children: /*#__PURE__*/_jsx(Button, {\n            variant: \"outlined\",\n            size: \"small\",\n            component: \"span\",\n            children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0444\\u043E\\u0442\\u043E\\u0433\\u0440\\u0430\\u0444\\u0438\\u044E\"\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(Typography, {\n        variant: \"h5\",\n        children: [\"\\u041D\\u0438\\u043A: \", user === null || user === void 0 ? void 0 : user.nicname]\n      }), /*#__PURE__*/_jsxs(Typography, {\n        variant: \"h6\",\n        children: [\"\\u041F\\u043E\\u0447\\u0442\\u0430: \", user === null || user === void 0 ? void 0 : user.email]\n      }), /*#__PURE__*/_jsx(Button, {\n        className: style.logout,\n        variant: \"outlined\",\n        onClick: logout,\n        children: \"\\u0412\\u044B\\u0439\\u0442\\u0438\"\n      })]\n    })]\n  });\n};\n\nexport default user;","map":null,"metadata":{},"sourceType":"module"}